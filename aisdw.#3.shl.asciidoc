#!/bin/bash
#***********************************************************************
#
#  University of South Florida
#  Student Information System
#  Program Unit Information
#
#  General Information
#  -------------------
#  Reposit Name       : aisdw
#  Shell Script Name  : aisdw.#3.shl.asciidoc
#  Process Associated : git
#  Object Source File Location and Name : c:\github\aisdw.wiki\aisdw.#3.shl.asciidoc
#  Business Logic : 
#
#
# Audit Trail (in descending date order)
# ------------------------------------  
#      Date         User         Reason For Change
#   ---------       ------     -----------------------
#    10/14/2013     SUNITHA     Initial Creation 
#   
#************************************************************************
echo "Enter git Issue. (Like aisdw.#1/aisdw.#3.dvlp ..)."
read stage
curdir=`pwd`
cd ../aisdw
git checkout ${stage}
cd ${curdir}
if [ -d ../aisdw.#3 ]; then
   rm -r -f ../aisdw.#3
fi


mkdir ../aisdw.#3


# copy tables/triggers 
mkdir ../aisdw.#3/dbtable
cp ../aisdw/dbtable/mma_restore_type.sql ../aisdw.#3/dbtable/
cp ../aisdw/dbtable/mma_db_restore_hist_col_add.sql ../aisdw.#3/dbtable/

# copy grants for objects created fitst time..
mkdir ../aisdw.#3/dbgrsyn
cp ../aisdw/dbgrsyn/mma_restore_type.sql ../aisdw.#3/dbgrsyn/

# if you have db objects, copy driver script to Issue folder
cp  aisdw.#3.sql.asciidoc ../aisdw.#3/
cp  aisdw.#3.txt.asciidoc ../aisdw.#3/
cd ../aisdw
echo "Are you rnning this script as CM support?(yes/no)"
read resp
if [ ${resp} == "yes" ];then
  git checkout master
	echo "Makesure branch is on master"
	read branch
fi	